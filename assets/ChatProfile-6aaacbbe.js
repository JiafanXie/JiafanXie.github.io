import{bn as L,bo as g,bp as ee,bq as te,br as ae,bm as se,ao as O,aC as A,o as h,c as C,b as n,w as r,a as f,az as re,at as ne,V as le,ad as oe,ar as z,af as V,ae as P,a1 as S,a9 as R,d as T,a2 as b,ac as U,am as E,aj as F,au as j,al as y,bk as ie,a4 as $,u as ce}from"./index-1b2cf765.js";import{d as ue,g as B,a as de}from"./index-5a0c5ef2.js";function fe(e,s){L(2,arguments);var t=g(e),i=g(s),c=t.getTime()-i.getTime();return c<0?-1:c>0?1:c}function G(e,s){if(e==null)throw new TypeError("assign requires that input parameter not be null or undefined");for(var t in s)Object.prototype.hasOwnProperty.call(s,t)&&(e[t]=s[t]);return e}function me(e){return G({},e)}var H=1e3*60,M=60*24,Y=M*30,q=M*365;function he(e,s,t){var i,c,p;L(2,arguments);var D=de(),u=(i=(c=t==null?void 0:t.locale)!==null&&c!==void 0?c:D.locale)!==null&&i!==void 0?i:ue;if(!u.formatDistance)throw new RangeError("locale must contain localize.formatDistance property");var m=fe(e,s);if(isNaN(m))throw new RangeError("Invalid time value");var d=G(me(t),{addSuffix:Boolean(t==null?void 0:t.addSuffix),comparison:m}),_,v;m>0?(_=g(s),v=g(e)):(_=g(e),v=g(s));var a=String((p=t==null?void 0:t.roundingMethod)!==null&&p!==void 0?p:"round"),l;if(a==="floor")l=Math.floor;else if(a==="ceil")l=Math.ceil;else if(a==="round")l=Math.round;else throw new RangeError("roundingMethod must be 'floor', 'ceil' or 'round'");var I=v.getTime()-_.getTime(),x=I/H,J=B(v)-B(_),w=(I-J)/H,N=t==null?void 0:t.unit,o;if(N?o=String(N):x<1?o="second":x<60?o="minute":x<M?o="hour":w<Y?o="day":w<q?o="month":o="year",o==="second"){var K=l(I/1e3);return u.formatDistance("xSeconds",K,d)}else if(o==="minute"){var Q=l(x);return u.formatDistance("xMinutes",Q,d)}else if(o==="hour"){var W=l(x/60);return u.formatDistance("xHours",W,d)}else if(o==="day"){var X=l(w/M);return u.formatDistance("xDays",X,d)}else if(o==="month"){var k=l(w/Y);return k===12&&N!=="month"?u.formatDistance("xYears",1,d):u.formatDistance("xMonths",k,d)}else if(o==="year"){var Z=l(w/q);return u.formatDistance("xYears",Z,d)}throw new RangeError("unit must be 'second', 'minute', 'hour', 'day', 'month' or 'year'")}function _e(e,s){return L(1,arguments),he(e,Date.now(),s)}const ve=ee({id:"chat",state:()=>({chats:[],chatContent:1}),getters:{},actions:{async fetchChats(){try{const e=await te.get("/api/data/chat/ChatData");this.chats=e.data}catch(e){alert(e),console.log(e)}},SelectChat(e){this.chatContent=e},sendMsg(e,s){const t={id:e,msg:s,type:"text",attachments:[],createdAt:ae(new Date,{seconds:1}),senderId:e};this.chats=this.chats.filter(i=>i.id===e?{...i,...i.chatHistory.push(t)}:i)}}});const ge={class:"px-6 pt-3"},pe=T("Recent Chats "),xe=["src"],we=f("small",{class:"textPrimary text-subtitle-2"},"Sent a Photo",-1),ye={key:1,class:"text-subtitle-2 textPrimary mt-1 text-truncate w-100"},Ce={class:"d-flex flex-column text-right w-25"},be={class:"textPrimary text-subtitle-2"},Se={setup(e){const s=ve();se(()=>{s.fetchChats()});const i=O(()=>s.chats),c=A(""),p=O(()=>i.value.filter(m=>m.name.toLowerCase().includes(c.value.toLowerCase()))),D=m=>ie.last(m.chatHistory).createdAt,u=A([{title:"Sort by time"},{title:"Sort by Unread"},{title:"Mark all as read"}]);return(m,d)=>{const _=$("ChevronDownIcon"),v=$("perfect-scrollbar");return h(),C(V,null,[n(E,null,{default:r(()=>[f("div",ge,[n(re,{variant:"outlined",modelValue:c.value,"onUpdate:modelValue":d[0]||(d[0]=a=>c.value=a),"append-inner-icon":"mdi-magnify",placeholder:"Search Contact","hide-details":"",density:"compact"},null,8,["modelValue"]),n(ne,null,{activator:r(({props:a})=>[n(le,oe({color:"white",variant:"flat",class:"mt-4 text-medium-emphasis"},a),{default:r(()=>[pe,n(_,{size:"18",class:"ml-2"})]),_:2},1040)]),default:r(()=>[n(z,{class:"elevation-10"},{default:r(()=>[(h(!0),C(V,null,P(u.value,(a,l)=>(h(),S(U,{key:l,value:l},{default:r(()=>[n(R,null,{default:r(()=>[T(b(a.title),1)]),_:2},1024)]),_:2},1032,["value"]))),128))]),_:1})]),_:1})])]),_:1}),n(v,{class:"lgScroll"},{default:r(()=>[n(z,null,{default:r(()=>[(h(!0),C(V,null,P(y(p),a=>(h(),S(U,{value:a.id,color:"primary",class:"text-no-wrap chatItem",key:a.id,lines:"two",active:y(s).chatContent===a.id,onClick:l=>y(s).SelectChat(a.id)},{prepend:r(()=>[n(F,null,{default:r(()=>[f("img",{src:a.thumb,alt:"pro",width:"50"},null,8,xe)]),_:2},1024),n(j,{class:"badg-dot",dot:"",color:a.status==="away"?"warning":a.status==="busy"?"error":a.status==="online"?"success":"containerBg"},null,8,["color"])]),append:r(()=>[f("div",Ce,[f("small",be,b(y(_e)(new Date(D(a)),{addSuffix:!1})),1)])]),default:r(()=>[n(R,{class:"text-subtitle-1 textPrimary w-100 font-weight-semibold"},{default:r(()=>[T(b(a.name),1)]),_:2},1024),a.chatHistory.slice(-1)[0].type=="img"?(h(),S(E,{key:0},{default:r(()=>[we]),_:1})):(h(),C("div",ye,b(a.chatHistory.slice(-1)[0].msg),1))]),_:2},1032,["value","active","onClick"]))),128))]),_:1})]),_:1})],64)}}},Ee=Se;const Me={class:"d-flex gap-2 align-center pa-6"},De=["src"],Ie=f("div",null,[f("h5",{class:"text-subtitle-1 font-weight-semibold"},"Mathew Anderson"),f("h6",{class:"text-subtitle-2"},"Designer")],-1),Ne={setup(e){return(s,t)=>(h(),S(E,null,{default:r(()=>[f("div",Me,[n(F,{size:"large"},{default:r(()=>[f("img",{src:y(ce),alt:"pro",width:"54"},null,8,De)]),_:1}),n(j,{class:"badg-dotDetail",dot:"",color:"success"}),Ie])]),_:1}))}},Le=Ne;export{Le as C,Ee as a,_e as f,ve as u};
